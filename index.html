<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tá» tÃ¬nh ğŸ’Œ</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: url('bg.png') center/cover no-repeat;
    font-family: 'Poppins', sans-serif;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    color: #2e1a1a;
  }

  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(255, 255, 255, 0.35);
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 100;
    max-width: 600px;
    margin: 120px auto;
    background: rgba(255, 240, 245, 0.9);
    border: 4px solid rgba(255, 105, 135, 0.9);
    border-radius: 2rem;
    padding: 40px 50px;
    text-align: center;
    box-shadow: 0 0 35px rgba(255, 80, 130, 0.5);
  }

  input {
    padding: 10px 15px;
    border-radius: 10px;
    border: 2px solid #ff66aa;
    font-size: 18px;
    text-align: center;
    color: #442222;
  }

  button {
    margin-top: 15px;
    padding: 10px 20px;
    font-size: 18px;
    border-radius: 10px;
    border: none;
    background: linear-gradient(45deg, #ff99cc, #ff66aa);
    color: white;
    cursor: pointer;
    transition: 0.3s;
  }

  button:hover {
    background: linear-gradient(45deg, #ff66aa, #ff3385);
  }

  .btn-group {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 2rem;
    position: relative;
    width: 100%;
    height: 120px;
  }

  @keyframes floatUp {
    0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
    100% { transform: translateY(-120vh) rotate(360deg) scale(1.4); opacity: 0; }
  }

  .love-item {
    position: fixed;
    bottom: -10vh;
    pointer-events: none;
    z-index: 5;
    opacity: 0.9;
  }

  .heart {
    position: fixed;
    bottom: 0;
    color: pink;
    font-size: 24px;
    animation: fly 6s linear infinite;
    z-index: 5;
  }

  @keyframes fly {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-110vh) scale(1.5); opacity: 0; }
  }
</style>
</head>

<body>
  <div class="overlay"></div>

  <div class="container" id="content">
    <h2>Xin chÃ o ğŸ’•, cho mÃ¬nh biáº¿t tÃªn cáº­u nhÃ©?</h2>
    <input type="text" id="name" placeholder="Nháº­p tÃªn cá»§a cáº­u...">
    <br>
    <button onclick="askImpression()">Gá»­i</button>
  </div>

  <audio id="bgMusic" autoplay loop>
    <source src="September.mp3" type="audio/mpeg">
    TrÃ¬nh duyá»‡t cá»§a báº¡n khÃ´ng há»— trá»£ phÃ¡t nháº¡c.
  </audio>

<script>
  const container = document.getElementById('content');
  const bgMusic = document.getElementById('bgMusic');
  bgMusic.volume = 0.4;

  window.addEventListener('load', () => {
    bgMusic.play().catch(() => { console.log("Autoplay bá»‹ cháº·n â€” chá» tÆ°Æ¡ng tÃ¡c."); });
  });

  const enableMusic = () => {
    if (bgMusic.paused) bgMusic.play().then(() => console.log("Nháº¡c phÃ¡t sau khi ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c"));
    document.removeEventListener('click', enableMusic);
    document.removeEventListener('keydown', enableMusic);
  };
  document.addEventListener('click', enableMusic);
  document.addEventListener('keydown', enableMusic);

  function askImpression() {
    const name = "Nhi";
    container.innerHTML = `
      <h2>Tá»› biáº¿t cáº­u tÃªn lÃ  <span style="color:#ff3e9e">${name}</span> mÃ  ğŸ’–</h2>
      <p>Cáº­u cÃ³ áº¥n tÆ°á»£ng gÃ¬ vá»›i tá»› khÃ´ng nÃ¨ ğŸ˜š</p>
      <input type="text" id="impression" placeholder="Nháº­p vÃ o Ä‘Ã¢y nhÃ©...">
      <br>
      <button onclick="showAnswer()">Gá»­i</button>
    `;
  }

  function showAnswer() {
    container.innerHTML = `
      <h2>Tá»› biáº¿t rá»“i ğŸ˜ â€” tá»› Ä‘áº¹p trai láº¯m Ä‘Ãºng khÃ´ng ğŸ’—</h2>
      <p>Giá» thÃ¬...</p>
      <h3>Cáº­u lÃ m ngÆ°á»i yÃªu tá»› nhÃ© ğŸ¥°</h3>
      <p><i>Tá»› há»©a sáº½ yÃªu cáº­u tháº­t nhiá»u ğŸ’•</i></p>
      <div class="btn-group">
        <button id="yes" onclick="acceptLove()">Äá»“ng Ã½ ğŸ’</button>
        <button id="no">Tá»« chá»‘i ğŸ’”</button>
      </div>
    `;

    const noBtn = document.getElementById('no');
    const yesBtn = document.getElementById('yes');
    let isRunning = false;

    noBtn.addEventListener('mouseenter', () => { isRunning = true; moveButton(); });

    function moveButton() {
      if (!isRunning) return;

      const parent = noBtn.parentElement;
      const rect = parent.getBoundingClientRect();
      const yesRect = yesBtn.getBoundingClientRect();
      const maxX = rect.width - noBtn.offsetWidth;
      const maxY = rect.height - noBtn.offsetHeight;
      let x, y, overlap;

      do {
        x = Math.random() * maxX;
        y = Math.random() * maxY;

        const noRect = {
          left: rect.left + x,
          top: rect.top + y,
          right: rect.left + x + noBtn.offsetWidth,
          bottom: rect.top + y + noBtn.offsetHeight
        };

        overlap = !(
          noRect.right < yesRect.left - 10 ||
          noRect.left > yesRect.right + 10 ||
          noRect.bottom < yesRect.top - 10 ||
          noRect.top > yesRect.bottom + 10
        );
      } while (overlap);

      noBtn.style.position = 'absolute';
      noBtn.style.left = `${x}px`;
      noBtn.style.top = `${y}px`;
    }

    noBtn.addEventListener('mouseover', () => { if (isRunning) moveButton(); });
  }

  function acceptLove() {
    container.innerHTML = `
      <h2>Cáº­u Ä‘á»“ng Ã½ rá»“i ğŸ’–</h2>
      <p>Tá»› sáº½ yÃªu cáº­u tháº­t nhiá»u ğŸ˜˜</p>
    `;

    navigator.vibrate?.(200);

    let waves = 0;
    const explosion = setInterval(() => {
      for (let i = 0; i < 50; i++) createLoveBurst();
      waves++;
      if (waves > 30) clearInterval(explosion);
    }, 200);
  }

  function createHeart() {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.innerHTML = 'ğŸ’–';
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.animationDuration = (3 + Math.random() * 3) + 's';
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 6000);
  }
  setInterval(createHeart, 500);

  const loveEmojis = ['ğŸ’–','ğŸ’•','ğŸ’˜','ğŸ’“','ğŸ’—','ğŸ’','ğŸ’','ğŸŒ¸','ğŸŒ·','ğŸŒ¹','ğŸŒº','ğŸŒ»','âœ¨','â­','ğŸ’«','ğŸŒ¼'];
  function createLoveBurst() {
    const el = document.createElement('div');
    el.className = 'love-item';
    el.textContent = loveEmojis[Math.floor(Math.random() * loveEmojis.length)];
    el.style.left = Math.random() * 100 + 'vw';
    el.style.fontSize = 20 + Math.random() * 40 + 'px';
    el.style.animation = `floatUp ${4 + Math.random() * 4}s linear forwards`;
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 8000);
  }
</script>
</body>
</html>
